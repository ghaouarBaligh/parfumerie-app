<div class="container mt-4">
  <h2>Liste des Produits</h2>

  <div class="mb-3">
    <button class="btn btn-success" (click)="toggleForm(true)">+ Ajouter Produit</button>
  </div>

  <!-- Formulaire dynamique -->
  <div *ngIf="showForm" class="card p-3 mb-3 shadow-sm">
    <div class="mb-2">
      <input class="form-control" placeholder="Nom" [(ngModel)]="produitForm.nom">
    </div>
    <div class="mb-2">
      <input type="number" class="form-control" placeholder="Prix" [(ngModel)]="produitForm.prix">
    </div>
    <div class="mb-2">
      <input type="number" class="form-control" placeholder="Stock" [(ngModel)]="produitForm.stock">
    </div>
    <div class="mb-2">
      <input type="number" class="form-control" placeholder="ID Fournisseur" [(ngModel)]="produitForm.fournisseurId">
    </div>
    <div class="d-flex gap-2">
      <button class="btn btn-primary" (click)="saveProduit()">Enregistrer</button>
      <button class="btn btn-secondary" (click)="toggleForm()">Annuler</button>
    </div>
  </div>

  <table class="table table-striped table-bordered">
    <thead class="thead-dark">
      <tr>
        <th>ID</th>
        <th>Nom</th>
        <th>Prix</th>
        <th>Stock</th>
        <th>Fournisseur</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let produit of produits">
        <td>{{ produit.id }}</td>
        <td>{{ produit.nom }}</td>
        <td>{{ produit.prix }} DT</td>
        <td>{{ produit.stock }}</td>
        <td>{{ produit.fournisseurNom }}</td>
        <td>
          <div class="d-flex gap-2">
            <button class="btn btn-primary btn-sm" (click)="editProduit(produit)">Modifier</button>
            <button class="btn btn-danger btn-sm" (click)="deleteProduit(produit.id!)">Supprimer</button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
